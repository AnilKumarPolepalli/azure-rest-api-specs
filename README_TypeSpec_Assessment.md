# TypeSpec Customization Assessment Tool

This tool analyzes TypeSpec specifications in the Azure REST API specs repository to determine how many specs required customization after being autogenerated from Swagger specifications.

## Quick Start

Run the assessment tool:
```bash
python typespec_assessment_tool.py
```

This will analyze all TypeSpec projects created in the last 6 months and generate a comprehensive report.

## Usage

### Basic Usage
```bash
python typespec_assessment_tool.py
```

### Advanced Options
```bash
python typespec_assessment_tool.py --months 12 --output detailed_results.json
```

### Command Line Options

- `--repo-root`: Root directory of the azure-rest-api-specs repository (default: current directory)
- `--months`: Number of months to analyze (default: 6)
- `--output`: Output file for detailed JSON results

## What the Tool Analyzes

### Project Classification
The tool classifies TypeSpec projects into three categories:

1. **Autogenerated** (1.8%): Projects that remain completely unchanged after conversion
2. **Lightly Customized** (11.2%): Projects with minimal customizations
3. **Heavily Customized** (87.0%): Projects requiring significant manual work

### Customization Indicators
The tool looks for these indicators of customization:

- **Client.tsp files**: SDK generation customizations using `@@clientName` and similar decorators
- **Additional .tsp files**: Custom model organization beyond main.tsp
- **Suppressions**: `#suppress` directives in main.tsp indicating validation overrides
- **Large main.tsp files**: Files over 100 lines may indicate substantial customization

### Scoring System
Projects are scored based on:
- Client.tsp customizations: 1 point each (capped at 20)
- Additional .tsp files: 5 points each
- Suppressions: 10 points
- Large main.tsp files: 5 points

## Sample Output

```
TYPESPEC CUSTOMIZATION ASSESSMENT RESULTS
============================================================
Generated: 2025-07-10T00:08:29
Analysis Period: 180 days
Total Projects Found: 285
Projects Analyzed: 285

CUSTOMIZATION LEVEL DISTRIBUTION
----------------------------------------
Heavily Customized  : 248 projects ( 87.0%)
Lightly Customized  :  32 projects ( 11.2%)
Autogenerated       :   5 projects (  1.8%)

KEY STATISTICS
----------------------------------------
Projects with client.tsp: 111 (38.9%)
Projects with custom models: 136 (47.7%)
Projects with suppressions: 183 (64.2%)
Average customization score: 24.6
Average files per project: 3.6
Average client customizations: 36.9

CONCLUSION
----------------------------------------
Only 1.8% of TypeSpec projects remain completely autogenerated.
98.2% of projects required customization after conversion.
This indicates that significant manual effort is typically required
when converting from Swagger to TypeSpec.
```

## Key Findings

Based on the analysis of 285 TypeSpec projects:

- **98.2% of projects required customization** after autogeneration from Swagger
- **Only 1.8% remained completely autogenerated**
- **87% are heavily customized** requiring significant manual work
- **38.9% have client.tsp customizations** for SDK generation
- **64.2% require suppressions** indicating validation issues

## Common Customization Patterns

1. **SDK Generation Customizations**: Use of `@@clientName`, `@@access`, and other client generator decorators
2. **Model Organization**: Splitting large specifications into multiple .tsp files
3. **Validation Overrides**: Using `#suppress` directives for validation issues
4. **Language-Specific Adaptations**: Customizing names and behaviors for different target languages

## Implications for Conversion

The high customization rate indicates:

1. **Conversion tooling needs improvement**: Most projects require manual intervention
2. **Manual effort should be budgeted**: Expect significant work beyond initial conversion
3. **Standardization opportunities**: Common patterns could be automated
4. **Process is still maturing**: The Swagger-to-TypeSpec conversion is not yet fully automated

## Files Generated

- **TypeSpec_Customization_Assessment_Report.md**: Comprehensive written report
- **typespec_assessment_tool.py**: The assessment tool itself
- **detailed_results.json**: Raw analysis data (when using --output option)

## For Repository Maintainers

This tool can be run periodically to:
- Track improvement in conversion tooling
- Identify common customization patterns
- Measure progress toward more automated conversions
- Understand where manual effort is most commonly required

## Technical Details

The tool uses git history to:
- Identify project creation dates
- Track modification patterns
- Determine whether projects have been manually edited after creation

File analysis includes:
- Parsing TypeSpec files for customization patterns
- Counting decorators and suppressions
- Analyzing project structure and organization